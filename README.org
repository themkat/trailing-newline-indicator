* trailing-newline-indicator

Emacs does not show the file's trailing newline as a visible line, since it is
just a `\n` at the end of the last real line. This makes it hard to see if a
file ends with a newline. This package provides a clear indicator (⏎) for that
otherwise invisible trailing newline. Optionally, it can also display the next
line number (e.g., ⏎ 43) when line numbers are active.

[[./preview.gif]]

** Features
- Shows a ⏎ symbol at the end of a file to mark the trailing newline.
- Optionally shows the next line number beside it (requires `display-line-numbers-mode`).
- Works with most buffer operations and updates automatically.

** Installation

You can install this package using any of the following methods:

*** Installing via MELPA

This is the recommended method for installing this package.

First, ensure you have the [[https://melpa.org/#/getting-started][MELPA repository]] configured in your Emacs.
If you haven't already, add this to your init file:

#+begin_src elisp
(require 'package)
(add-to-list 'package-archives '("melpa" . "https://melpa.org/packages/") t)
(package-initialize)
#+end_src

Then install the package:

#+begin_src elisp
M-x package-install RET trailing-newline-indicator RET
#+end_src

Or if you use `use-package`:

#+begin_src elisp
(use-package trailing-newline-indicator
  :ensure t
  :init
  (global-trailing-newline-indicator-mode 1))
#+end_src

*** Using package-vc-install (Emacs 29+)

Emacs 29 and later can install packages directly from Git repositories.

#+begin_src elisp
(package-vc-install "https://github.com/saulotoledo/trailing-newline-indicator")
(require 'trailing-newline-indicator)
(global-trailing-newline-indicator-mode 1)
#+end_src

You can later update all VC-installed packages with:

#+begin_src elisp
(package-vc-update-all)
#+end_src

Alternatively, if you use `use-package`:

#+begin_src elisp
(use-package trailing-newline-indicator
  :ensure nil
  :vc (:url "https://github.com/saulotoledo/trailing-newline-indicator")
  :init
  (global-trailing-newline-indicator-mode 1))
#+end_src

*** Manual installation

For manual installation, clone the repository to a directory in your `load-path`:

#+begin_src shell
git clone https://github.com/saulotoledo/trailing-newline-indicator.git \
    ~/.emacs.d/lisp/trailing-newline-indicator
#+end_src

Then add the following to your Emacs configuration:

#+begin_src elisp
(add-to-list 'load-path "~/.emacs.d/lisp/trailing-newline-indicator")
(require 'trailing-newline-indicator)
(global-trailing-newline-indicator-mode 1)
#+end_src

Note: Adjust the path (`~/.emacs.d/lisp/trailing-newline-indicator`) to match your preferred location.

** Usage

*** Enable locally (current buffer only)

To activate the trailing newline indicator in just the current buffer:

#+begin_src elisp
M-x trailing-newline-indicator-mode
#+end_src

Or programmatically:

#+begin_src elisp
(trailing-newline-indicator-mode 1)
#+end_src

*** Enable globally (all file buffers)

To activate the indicator automatically in all file buffers:

#+begin_src elisp
M-x global-trailing-newline-indicator-mode
#+end_src

Or programmatically:

#+begin_src elisp
(global-trailing-newline-indicator-mode 1)
#+end_src

The global mode automatically excludes minibuffers, special modes, and buffers without files.

** Configuration

You can customize the indicator and its behavior:

- To show the next line number (e.g., "⏎ 43") instead of just the ⏎ symbol:

#+begin_src elisp
(setq trailing-newline-indicator-show-line-number t)
#+end_src

This feature requires `display-line-numbers-mode`. If line numbers are disabled,
only the ⏎ symbol is shown.

- To change the indicator icon (default is ⏎), set:

#+begin_src elisp
(setq trailing-newline-indicator-newline-symbol "↵")
#+end_src

You can use any string or Unicode character you prefer. This is especially useful
if your font does not support the default symbol.
